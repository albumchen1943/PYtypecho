{% extends "admin/base.html" %}

{% block title %}添加文章{% endblock %}
{% block add_active %}active{% endblock %}
{% block styles %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/editormd.min.css') }}">
{% endblock %}

{% block content %}
    <div class="container">
        <div class="col-md-10 main-left">
            {{ form.csrf_token }}
            <div class="page-header">
                <h4>撰写新文章</h4>
            </div>
            <form action="{{ url_for('admin.addPost') }}" method="post">
                <div class="form-group">
                    {{ form.title.label(class="sr-only") }}
                    {{ form.title(class="form-control", placeholder="标题") }}
                </div>
                <div class="form-group slug">
                    {{ form.slug.label(class="sr-only") }}
                    <span>lleohao.com/{category}/</span>{{ form.slug(clacc="form-control", placeholder="标题") }}<span>.html</span>
                </div>
                <div class="form-group">
                    <div id="test-editormd"></div>
                </div>
                <div class="form-group pull-right">
                    <button class="btn btn-default" id="save" type="button">保存草稿</button>
                    {{ form.submit(class="btn btn-primary") }}
                </div>
            </form>
        </div>
    </div>



{% endblock %}

{% block scripts %}
    {{ super() }}
    <script src="{{ url_for('static', filename='js/editormd.min.js' )}}"></script>
    <script>
        var testEditor;

        $(function() {
            testEditor = editormd("test-editormd", {
                height: 600,
                syncScrolling : "single",
                delay: 300,
                searchReplace: true,
                codeFold: true,
                emoji: true,
                toolbarAutoFixed: false,
                path: "{{ url_for('static', filename='lib/') }}",

                toolbarIcons: function(){
                    return ["undo", "redo", "|",
                            "bold", "del", "italic", "quote", "|",
                            "list-ol", "list-ul", "hr", "|",
                            "link", "reference-link", "image", "|",
                            "code", "preformatted-text", "code-block", "goto-line", "|",
                            "table", "datetime", "emoji", "html-entities", "pagebreak", "||",
                            "preview", "watch", "fullscreen", "clear", "search",]
                }
            });
        });
    </script>
{% endblock %}