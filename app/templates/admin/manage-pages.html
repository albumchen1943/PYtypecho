{% extends "admin/base.html" %}
{% block title %}管理独立页面{% endblock %}
{% block manage %}active{% endblock %}

{% block content %}
    {{ super() }}
    <div class="container">
    <div class="page-title">
        <h2>管理页面 &nbsp;&nbsp;<a href="{{ url_for('admin.write_page') }}" class="btn btn-primary btn-sm" role="link">新增</a></h2>
    </div>
    <div class="row">
        <div class="col-md-12">
            <!--操作栏-->
            <div class="clearfix list-operate">
                <form method="get" class="form-inline">
                    <div class="operate pull-left">
                        <label>
                            <i class="sr-only">全选</i>
                            <input type="checkbox" class="select-all">
                        </label>
                        <div class="btn-group btn-group-sm" role="group">
                            <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">选中项&nbsp;<span class="caret"></span></button>
                            <ul class="dropdown-menu">
                                <li><a href="#" class="delete">删除</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="search pull-right">
                        <div class="form-group">
                            <input class="form-control" type="text" name="keyword" placeholder="请输入关键字">
                            <button class="btn btn-default" type="submit">筛选</button>
                        </div>
                    </div>
                </form>
            </div>
            <!--主体表格区-->
            <form method="post" name="manage-page" action="{{ url_for('admin.delete_pages') }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                <div class="manage-table">
                    <table class="table table-hover">
                        <colgroup>
                            <col width="20">
                            <col width="6%">
                            <col width="30%">
                            <col width="30%">
                            <col>
                            <col width="16%">
                        </colgroup>
                        <thead>
                            <tr>
                                <th> </th>
                                <th> </th>
                                <th>标题</th>
                                <th>缩略名</th>
                                <th>作者</th>
                                <th>日期</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for page in pages %}
                            <tr>
                                <td><input type="checkbox" value="{{ page.slug }}" name="slug"></td>
                                <td><a href="#" date-url="manage-comments.html?cid=1"><span class="badge">0</span></a></td>
                                <td>
                                    <a href="manage-pages.html?slug={{ page.slug }}">{{ page.title }}</a>
                                    <a href="index.html?slug={{ page.slug }}" title="浏览{{ page.title }}" target="_blank"><i class="glyphicon glyphicon-new-window"></i></a>
                                </td>
                                <td>{{ page.slug }}</td>
                                <td>{{ page.author }}</td>
                                <td>{{ createds[loop.index0] }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </form>
            <!--操作、页码栏-->
            <div class="clearfix list-operate">
                <div class="operate pull-left">
                    <label>
                        <i class="sr-only">全选</i>
                        <input type="checkbox" class="select-all">
                    </label>
                    <div class="btn-group btn-group-sm" role="group">
                        <button class="btn btn-default dropdown-toggle" data-toggle="dropdown">选中项&nbsp;<span class="caret"></span></button>
                        <ul class="dropdown-menu">
                            <li><a href="#" class="delete">删除</a></li>
                        </ul>
                    </div>
                </div>
                <div class="page-num pull-right">
                    <ul class="pagination clear-margin">
                        <li><a href="#"><span aria-hidden="true">&laquo;</span></a></li>
                        <li><a href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#"><span aria-hidden="true">&raquo;</span></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>


</div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script>
       $(".select-all").click(function(){
            var isChecked = $(this).prop("checked");
            $("input[name='slug']").prop("checked", isChecked);
        });
        $(".delete").click(function(){
            $("form")[1].submit();
        })
    </script>
{% endblock %}

